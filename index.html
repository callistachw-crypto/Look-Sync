<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Look Sync - Sync Your Style, Perfect Your Look</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Ramaraja&display=swap" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Monsieur+La+Doulaise&display=swap');
        
        :root {
            --color-1: #B8DB80;
            --color-2: #F7F6D3;
            --color-3: #FFE4EF;
            --color-4: #F39EB6;
            --color-5: #FCF8F8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Outfit', sans-serif;
            background: linear-gradient(135deg, var(--color-2) 0%, var(--color-3) 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .app-title {
            font-family: 'Monsieur La Doulaise', cursive;
            font-size: 4rem;
            color: var(--color-4);
            text-align: center;
            margin-bottom: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .app-slogan {
            font-family: 'Ramaraja', serif;
            font-size: 1.2rem;
            color: #666;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .card {
            border: none;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            background: var(--color-5);
            margin-bottom: 2rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--color-4) 0%, #e08ba4 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
            transition: transform 0.3s;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            background: linear-gradient(135deg, #e08ba4 0%, var(--color-4) 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--color-1) 0%, #a0c570 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
        }
        
        .form-control {
            border-radius: 10px;
            border: 2px solid var(--color-3);
            padding: 12px;
        }
        
        .form-control:focus {
            border-color: var(--color-4);
            box-shadow: 0 0 0 0.2rem rgba(243, 158, 182, 0.25);
        }
        
        .premium-badge {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .body-shape-result {
            background: var(--color-3);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .recommendation-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            border-left: 5px solid var(--color-4);
        }
        
        .navbar {
            background: var(--color-5);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .body-shape-illustration {
            max-width: 200px;
            margin: 20px auto;
            display: block;
        }
        
        .hidden {
            display: none !important;
        }
        
        .outfit-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin: 10px 0;
        }
        
        @media (max-width: 768px) {
            .app-title {
                font-size: 2.5rem;
            }
            .app-slogan {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Pages -->
    <div id="authPage">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <h1 class="app-title">Look Sync</h1>
                    <p class="app-slogan">sync your style, perfect your look</p>
                    
                    <!-- Login Form -->
                    <div class="card" id="loginForm">
                        <div class="card-body p-4">
                            <h3 class="text-center mb-4">Masuk ke Akun</h3>
                            <form onsubmit="handleLogin(event)">
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="loginEmail" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Password</label>
                                    <input type="password" class="form-control" id="loginPassword" required>
                                </div>
                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="rememberMe">
                                    <label class="form-check-label" for="rememberMe">Ingat Saya</label>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Masuk</button>
                                <p class="text-center mt-3">Belum punya akun? <a href="#" onclick="showRegister()">Daftar</a></p>
                            </form>
                        </div>
                    </div>
                    
                    <!-- Register Form -->
                    <div class="card hidden" id="registerForm">
                        <div class="card-body p-4">
                            <h3 class="text-center mb-4">Buat Akun Baru</h3>
                            <form onsubmit="handleRegister(event)">
                                <div class="mb-3">
                                    <label class="form-label">Nama Lengkap</label>
                                    <input type="text" class="form-control" id="registerName" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="registerEmail" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Password (minimal 6 karakter)</label>
                                    <input type="password" class="form-control" id="registerPassword" minlength="6" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Konfirmasi Password</label>
                                    <input type="password" class="form-control" id="registerConfirmPassword" required>
                                </div>
                                <button type="submit" class="btn btn-primary w-100">Daftar</button>
                                <p class="text-center mt-3">Sudah punya akun? <a href="#" onclick="showLogin()">Masuk</a></p>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <!-- Navbar -->
        <div class="navbar">
            <div class="container-fluid">
                <div class="d-flex justify-content-between align-items-center w-100">
                    <div>
                        <h3 class="mb-0" style="font-family: 'Monsieur La Doulaise', cursive; color: var(--color-4);">Look Sync</h3>
                        <small id="userGreeting"></small>
                    </div>
                    <div>
                        <span class="me-3" id="membershipBadge"></span>
                        <button class="btn btn-sm btn-outline-danger" onclick="handleLogout()">Keluar</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <!-- Input Form -->
            <div class="card" id="inputSection">
                <div class="card-body p-4">
                    <h4 class="mb-4">Data Fisik Anda</h4>
                    <form onsubmit="analyzeBody(event)">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Tinggi Badan (cm)</label>
                                <input type="number" class="form-control" id="height" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Berat Badan (kg)</label>
                                <input type="number" class="form-control" id="weight" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Lingkar Dada (cm)</label>
                                <input type="number" class="form-control" id="bust" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Lingkar Pinggang (cm)</label>
                                <input type="number" class="form-control" id="waist" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Lingkar Pinggul (cm)</label>
                                <input type="number" class="form-control" id="hip" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Lebar Bahu (cm)</label>
                                <input type="number" class="form-control" id="shoulder" required>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">Analisis Bentuk Tubuh</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Results Section -->
            <div class="card hidden" id="resultsSection">
                <div class="card-body p-4">
                    <h4 class="mb-4">Hasil Analisis</h4>
                    
                    <div class="body-shape-result">
                        <div class="text-center">
                            <h3 id="bodyShapeType"></h3>
                            <svg id="bodyShapeIllustration" class="body-shape-illustration"></svg>
                            <p id="bodyShapeDescription" class="mt-3"></p>
                        </div>
                    </div>

                    <div id="recommendationsSection">
                        <h5 class="mt-4 mb-3">Rekomendasi Gaya Berpakaian</h5>
                        <div id="recommendations"></div>
                    </div>

                    <div class="text-center mt-4">
                        <button class="btn btn-success" onclick="resetForm()">Analisis Lagi</button>
                        <button class="btn btn-primary" id="upgradeToPremium" onclick="showUpgradeModal()">Upgrade ke Premium</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upgrade Modal -->
    <div class="modal fade" id="upgradeModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 20px; border: none;">
                <div class="modal-body p-5 text-center">
                    <h3 class="mb-4">âœ¨ Upgrade ke Premium</h3>
                    <p class="mb-4">Dapatkan analisis mendalam dan lebih banyak rekomendasi gaya!</p>
                    <div class="mb-4">
                        <h4 style="color: var(--color-4);">Rp 50.000</h4>
                        <small>Akses selamanya</small>
                    </div>
                    <button class="btn btn-primary btn-lg w-100 mb-3" onclick="upgradeToPremium()">Beli Sekarang</button>
                    <button class="btn btn-outline-secondary" data-bs-dismiss="modal">Nanti Saja</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Authentication Functions
        function initApp() {
            const session = localStorage.getItem('lookSyncSession');
            if (session) {
                const user = JSON.parse(session);
                showMainApp(user);
            } else {
                document.getElementById('authPage').classList.remove('hidden');
            }
        }

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash.toString(36);
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;

            if (password !== confirmPassword) {
                alert('Password tidak cocok!');
                return;
            }

            const users = JSON.parse(localStorage.getItem('lookSyncUsers') || '[]');
            
            if (users.find(u => u.email === email)) {
                alert('Email sudah terdaftar!');
                return;
            }

            const newUser = {
                id: Date.now(),
                name,
                email,
                password: simpleHash(password),
                isPremium: false,
                createdAt: new Date().toISOString()
            };

            users.push(newUser);
            localStorage.setItem('lookSyncUsers', JSON.stringify(users));
            alert('Registrasi berhasil! Silakan login.');
            showLogin();
        }

        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const remember = document.getElementById('rememberMe').checked;

            const users = JSON.parse(localStorage.getItem('lookSyncUsers') || '[]');
            const user = users.find(u => u.email === email && u.password === simpleHash(password));

            if (!user) {
                alert('Email atau password salah!');
                return;
            }

            if (remember) {
                localStorage.setItem('lookSyncSession', JSON.stringify(user));
            } else {
                sessionStorage.setItem('lookSyncSession', JSON.stringify(user));
            }

            showMainApp(user);
        }

        function handleLogout() {
            localStorage.removeItem('lookSyncSession');
            sessionStorage.removeItem('lookSyncSession');
            location.reload();
        }

        function showRegister() {
            document.getElementById('loginForm').classList.add('hidden');
            document.getElementById('registerForm').classList.remove('hidden');
        }

        function showLogin() {
            document.getElementById('registerForm').classList.add('hidden');
            document.getElementById('loginForm').classList.remove('hidden');
        }

        function showMainApp(user) {
            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('userGreeting').textContent = `Halo, ${user.name}!`;
            
            const badge = user.isPremium ? 
                '<span class="premium-badge">ðŸ‘‘ Premium</span>' : 
                '<span class="badge bg-secondary">Free</span>';
            document.getElementById('membershipBadge').innerHTML = badge;
            
            document.getElementById('upgradeToPremium').style.display = user.isPremium ? 'none' : 'inline-block';
        }

        // Body Shape Analysis
        function determineBodyShape(measurements) {
            const { bust, waist, hip, shoulder } = measurements;
            const shoulderHipRatio = shoulder / hip;
            const bustHipRatio = bust / hip;
            const bustWaistDiff = bust - waist;
            const hipWaistDiff = hip - waist;

            if (Math.abs(bust - hip) <= 5 && (bust - waist) >= 15) {
                return 'hourglass';
            } else if (hip > bust && hip > shoulder && hipWaistDiff >= 15) {
                return 'pear';
            } else if (bust > hip + 5 && shoulder > hip) {
                return 'apple';
            } else if (shoulder > hip + 5 && bust > hip) {
                return 'inverted-triangle';
            } else {
                return 'rectangle';
            }
        }

        function getBodyShapeInfo(shape) {
            const info = {
                'hourglass': {
                    name: 'Bentuk Jam Pasir (Hourglass)',
                    description: 'Tubuh Anda memiliki proporsi yang seimbang antara bahu dan pinggul dengan pinggang yang jelas. Bentuk tubuh ini dianggap ideal dan dapat mengenakan berbagai gaya pakaian.',
                    svg: '<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg"><path d="M100 50 Q80 50 70 80 Q65 120 70 150 Q80 180 100 180 Q120 180 130 150 Q135 120 130 80 Q120 50 100 50" fill="#F39EB6" stroke="#333" stroke-width="2"/><ellipse cx="100" cy="50" rx="25" ry="35" fill="#F39EB6" stroke="#333" stroke-width="2"/></svg>'
                },
                'pear': {
                    name: 'Bentuk Pir (Pear)',
                    description: 'Pinggul Anda lebih lebar dibanding bahu dengan pinggang yang ramping. Bentuk ini memberikan siluet feminin yang menarik.',
                    svg: '<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg"><path d="M100 50 Q85 50 75 80 Q60 120 65 150 Q75 200 100 200 Q125 200 135 150 Q140 120 125 80 Q115 50 100 50" fill="#F39EB6" stroke="#333" stroke-width="2"/><ellipse cx="100" cy="50" rx="20" ry="30" fill="#F39EB6" stroke="#333" stroke-width="2"/></svg>'
                },
                'apple': {
                    name: 'Bentuk Apel (Apple)',
                    description: 'Bagian atas tubuh Anda lebih berisi dengan kaki yang ramping. Fokus pada memanjangkan tubuh dan menciptakan definisi pinggang.',
                    svg: '<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg"><path d="M100 50 Q75 50 65 80 Q55 120 60 150 Q70 180 100 180 Q130 180 140 150 Q145 120 135 80 Q125 50 100 50" fill="#F39EB6" stroke="#333" stroke-width="2"/><ellipse cx="100" cy="50" rx="30" ry="35" fill="#F39EB6" stroke="#333" stroke-width="2"/></svg>'
                },
                'inverted-triangle': {
                    name: 'Segitiga Terbalik (Inverted Triangle)',
                    description: 'Bahu Anda lebih lebar dari pinggul dengan kaki yang ramping. Bentuk atletis ini cocok untuk menciptakan keseimbangan visual.',
                    svg: '<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg"><path d="M100 50 Q70 50 60 80 Q55 120 65 150 Q75 180 100 180 Q125 180 135 150 Q145 120 140 80 Q130 50 100 50" fill="#F39EB6" stroke="#333" stroke-width="2"/><ellipse cx="100" cy="50" rx="35" ry="30" fill="#F39EB6" stroke="#333" stroke-width="2"/></svg>'
                },
                'rectangle': {
                    name: 'Bentuk Persegi (Rectangle)',
                    description: 'Bahu, pinggang, dan pinggul Anda memiliki lebar yang hampir sama. Bentuk ini memungkinkan Anda bereksperimen dengan berbagai siluet.',
                    svg: '<svg viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg"><path d="M100 50 Q85 50 75 80 L70 150 Q80 180 100 180 Q120 180 130 150 L125 80 Q115 50 100 50" fill="#F39EB6" stroke="#333" stroke-width="2"/><ellipse cx="100" cy="50" rx="25" ry="30" fill="#F39EB6" stroke="#333" stroke-width="2"/></svg>'
                }
            };
            return info[shape];
        }

        function getRecommendations(shape, isPremium) {
            const recommendations = {
                'hourglass': [
                    {
                        top: 'Atasan Fit & Flare',
                        bottom: 'Celana Highwaist',
                        description: 'Menonjolkan lekuk tubuh dengan elegan',
                        image: 'https://images.unsplash.com/photo-1515372039744-b8f02a3ae446?w=400'
                    },
                    {
                        top: 'Wrap Top',
                        bottom: 'Rok Pensil',
                        description: 'Sempurna untuk acara formal',
                        image: 'https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?w=400'
                    },
                    {
                        top: 'Blouse V-Neck',
                        bottom: 'Jeans Skinny',
                        description: 'Kasual namun tetap stylish',
                        image: 'https://images.unsplash.com/photo-1594633313593-bab3825d0caf?w=400'
                    },
                    {
                        top: 'Crop Top',
                        bottom: 'Kulot',
                        description: 'Trendi dan nyaman',
                        image: 'https://images.unsplash.com/photo-1485968579580-b6d095142e6e?w=400'
                    },
                    {
                        top: 'Bodycon Dress',
                        bottom: '',
                        description: 'Memaksimalkan siluet tubuh',
                        image: 'https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=400'
                    }
                ],
                'pear': [
                    {
                        top: 'Atasan Berdetail',
                        bottom: 'Celana Lurus',
                        description: 'Menyeimbangkan proporsi tubuh',
                        image: 'https://images.unsplash.com/photo-1558769132-cb1aea42c7a3?w=400'
                    },
                    {
                        top: 'Blazer Struktural',
                        bottom: 'Rok A-Line',
                        description: 'Profesional dan proporsional',
                        image: 'https://images.unsplash.com/photo-1591369822096-ffd140ec948f?w=400'
                    },
                    {
                        top: 'Off-Shoulder Top',
                        bottom: 'Kulot Gelap',
                        description: 'Menarik perhatian ke atas',
                        image: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400'
                    },
                    {
                        top: 'Striped Top Horizontal',
                        bottom: 'Wide Leg Pants',
                        description: 'Menciptakan keseimbangan visual',
                        image: 'https://images.unsplash.com/photo-1467043237213-65f2da53396f?w=400'
                    },
                    {
                        top: 'Peplum Top',
                        bottom: 'Jeans Bootcut',
                        description: 'Feminine dan proporsional',
                        image: 'https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?w=400'
                    }
                ],
                'apple': [
                    {
                        top: 'Empire Waist Top',
                        bottom: 'Jeans Skinny',
                        description: 'Memanjangkan siluet tubuh',
                        image: 'https://images.unsplash.com/photo-1562137369-1a1a0bc66744?w=400'
                    },
                    {
                        top: 'Tunik Flowy',
                        bottom: 'Legging',
                        description: 'Nyaman dan menyamarkan perut',
                        image: 'https://images.unsplash.com/photo-1496747611176-843222e1e57c?w=400'
                    },
                    {
                        top: 'V-Neck Dress',
                        bottom: '',
                        description: 'Memanjangkan leher dan tubuh',
                        image: 'https://images.unsplash.com/photo-1595777457583-95e059d581b8?w=400'
                    },
                    {
                        top: 'Wrap Cardigan',
                        bottom: 'Celana Palazzo',
                        description: 'Menciptakan garis vertikal',
                        image: 'https://images.unsplash.com/photo-1434389677669-e08b4cac3105?w=400'
                    },
                    {
                        top: 'Asymmetric Top',
                        bottom: 'Rok Midi',
                        description: 'Distraksi visual yang menarik',
                        image: 'https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400'
                    }
                ],
                'inverted-triangle': [
                    {
                        top: 'Atasan Simple',
                        bottom: 'Rok Flare',
                        description: 'Menyeimbangkan bahu lebar',
                        image: 'https://images.unsplash.com/photo-1525562723836-dca67a71d5f1?w=400'
                    },
                    {
                        top: 'V-Neck Basic',
                        bottom: 'Wide Leg Pants',
                        description: 'Menciptakan proporsi seimbang',
                        image: 'https://images.unsplash.com/photo-1564584217132-2271feaeb3c5?w=400'
                    },
                    {
                        top: 'Halter Neck',
                        bottom: 'Celana Palazzo',
                        description: 'Fokus pada bagian bawah',
                        image: 'https://images.unsplash.com/photo-1487222477894-8943e31ef7b2?w=400'
                    },
                    {
                        top: 'Scoop Neck Top',
                        bottom: 'Rok Plisket',
                        description: 'Softening bahu',
                        image: 'https://images.unsplash.com/photo-1617019114583-affb34d1b3cd?w=400'
                    },
                    {
                        top: 'Raglan Sleeve',
                        bottom: 'Kulot Bermotif',
                        description: 'Menarik perhatian ke bawah',
                        image: 'https://images.unsplash.com/photo-1578932750294-f5075e85f44a?w=400'
                    }
                ],
                'rectangle': [
                    {
                        top: 'Peplum Top',
                        bottom: 'Jeans Skinny',
                        description: 'Menciptakan ilusi pinggang',
                        image: 'https://images.unsplash.com/photo-1544441893-675973e31985?w=400'
                    },
                    {
                        top: 'Belt Top',
                        bottom: 'Rok A-Line',
                        description: 'Mendefinisikan pinggang',
                        image: 'https://images.unsplash.com/photo-1539533018447-63fcce2678e3?w=400'
                    },
                    {
                        top: 'Ruffled Blouse',
                        bottom: 'Celana Highwaist',
                        description: 'Menambah dimensi pada tubuh',
                        image: 'https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400'
                    },
                    {
                        top: 'Wrap Dress',
                        bottom: '',
                        description: 'Menciptakan kurva natural',
                        image: 'https://images.unsplash.com/photo-1596783074918-c84cb06531ca?w=400'
                    },
                    {
                        top: 'Cropped Jacket',
                        bottom: 'Rok Plisket',
                        description: 'Mempersingkat torso',
                        image: 'https://images.unsplash.com/photo-1591047139829-d91aecb6caea?w=400'
                    }
                ]
            };

            const limit = isPremium ? 5 : 3;
            return recommendations[shape].slice(0, limit);
        }

        function analyzeBody(e) {
            e.preventDefault();
            
            const measurements = {
                height: parseInt(document.getElementById('height').value),
                weight: parseInt(document.getElementById('weight').value),
                bust: parseInt(document.getElementById('bust').value),
                waist: parseInt(document.getElementById('waist').value),
                hip: parseInt(document.getElementById('hip').value),
                shoulder: parseInt(document.getElementById('shoulder').value)
            };

            const session = localStorage.getItem('lookSyncSession') || sessionStorage.getItem('lookSyncSession');
            const user = JSON.parse(session);

            const bodyShape = determineBodyShape(measurements);
            const shapeInfo = getBodyShapeInfo(bodyShape);
            const recommendations = getRecommendations(bodyShape, user.isPremium);

            // Display results
            document.getElementById('bodyShapeType').textContent = shapeInfo.name;
            document.getElementById('bodyShapeIllustration').innerHTML = shapeInfo.svg;
            document.getElementById('bodyShapeDescription').textContent = shapeInfo.description;

            // Display recommendations
            const recommendationsHTML = recommendations.map((rec, index) => `
                <div class="recommendation-card">
                    <h6 class="mb-3" style="color: var(--color-4);">Outfit ${index + 1}</h6>
                    <div class="row">
                        <div class="col-md-6">
                            <img src="${rec.image}" alt="${rec.top}" class="outfit-image">
                        </div>
                        <div class="col-md-6">
                            <p><strong>Atasan:</strong> ${rec.top}</p>
                            ${rec.bottom ? `<p><strong>Bawahan:</strong> ${rec.bottom}</p>` : ''}
                            <p><strong>Tips:</strong> ${rec.description}</p>
                        </div>
                    </div>
                </div>
            `).join('');

            document.getElementById('recommendations').innerHTML = recommendationsHTML;

            // Show results, hide input
            document.getElementById('inputSection').classList.add('hidden');
            document.getElementById('resultsSection').classList.remove('hidden');
            
            // Scroll to results
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        function resetForm() {
            document.getElementById('resultsSection').classList.add('hidden');
            document.getElementById('inputSection').classList.remove('hidden');
            document.querySelector('form').reset();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function showUpgradeModal() {
            const modal = new bootstrap.Modal(document.getElementById('upgradeModal'));
            modal.show();
        }

        function upgradeToPremium() {
            const session = localStorage.getItem('lookSyncSession') || sessionStorage.getItem('lookSyncSession');
            const user = JSON.parse(session);

            // Update user status
            user.isPremium = true;

            // Update in users array
            const users = JSON.parse(localStorage.getItem('lookSyncUsers') || '[]');
            const userIndex = users.findIndex(u => u.id === user.id);
            if (userIndex !== -1) {
                users[userIndex].isPremium = true;
                localStorage.setItem('lookSyncUsers', JSON.stringify(users));
            }

            // Update session
            localStorage.setItem('lookSyncSession', JSON.stringify(user));

            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('upgradeModal'));
            modal.hide();

            // Show success message and reload
            alert('ðŸŽ‰ Selamat! Akun Anda telah di-upgrade ke Premium!');
            location.reload();
        }

        // Initialize app on page load
        window.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>